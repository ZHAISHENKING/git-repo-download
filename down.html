<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="author" content="colorlib.com">
  <link href="//fonts.googleapis.com/css?family=Poppins:300,400,500" rel="stylesheet" />
  <link href="down.css" rel="stylesheet" />
  <link href="https://cdn.bootcss.com/toastr.js/2.1.4/toastr.min.css" rel="stylesheet">
</head>
<body>
<div class="s004">
  <form>
    <fieldset>
      <legend>COPY GITHUB LINK</legend>
      <div class="inner-form">
        <div class="input-field">
          <input class="form-control" id="choices-text-preset-values" type="text" placeholder="Download link" />
          <button class="btn-search" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
            </svg>
          </button>
        </div>
      </div>
    </fieldset>
  </form>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/choices.js/3.0.4/choices.min.js"></script>
<script>
  let textPresetVal = new Choices('#choices-text-preset-values',
    {
      removeItemButton: true,
    });
</script>
</body><!-- This templates was made by Colorlib (https://colorlib.com) -->
</html>
<script src="https://cdn.bootcss.com/axios/0.19.2/axios.js"></script>
<script src="https://cdn.bootcss.com/FileSaver.js/1.3.8/FileSaver.min.js"></script>
<script src="https://cdn.bootcss.com/jszip/3.2.2/jszip.min.js"></script>
<script src="https://cdn.bootcss.com/toastr.js/2.1.4/toastr.min.js"></script>
<script src="down.js"></script>
<script>
  window.onload = function(){
    document.getElementsByTagName('button')[0].onclick = function(){
      const search = document.getElementsByClassName('choices__input choices__input--cloned')[0].value
      const split_dir = search.split('/')
      const routeParam = {
        url: search,
        fileName: split_dir[split_dir.length-1],
        rootDirectory: split_dir[split_dir.length-1]
      }
      try {
        run(routeParam)
      } catch {
        alert('地址不合法')
      }
    }
  }
</script>
